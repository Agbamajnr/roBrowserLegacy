/*!
 * jQuery Mobile Events
 * by Ben Major (lincweb - www.lincweb.co.uk)
 *
 * Copyright 2011-2015, Ben Major
 * Licensed under the MIT License:
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */(function(a){function F(){var a=D();a!==G&&(G=a,C.trigger("orientationchange"))}function v(f,c,u,g){var t=u.type;u.type=c;a.event.dispatch.call(f,u,g);u.type=t}a.attrFn=a.attrFn||{};var d=navigator.userAgent.toLowerCase(),d=-1<d.indexOf("chrome")&&(-1<d.indexOf("windows")||-1<d.indexOf("macintosh")||-1<d.indexOf("linux"))&&0>d.indexOf("mobile")&&0>d.indexOf("android"),f="ontouchstart"in window&&!d,E="orientation"in window&&"onorientationchange"in window,w="ontouchstart"in window&&!d?"touchstart":"mousedown",x="ontouchstart"in window&&!d?"touchend":"mouseup",A="ontouchstart"in window&&!d?"touchmove":"mousemove",P="ontouchstart"in window&&!d?"tap":"click",H="ontouchstart"in window&&!d?"touchmove":"scroll";a.isTouchCapable=function(){return f};a.getStartEvent=function(){return w};a.getEndEvent=function(){return x};a.getMoveEvent=function(){return A};a.getTapEvent=function(){return P};a.getScrollEvent=function(){return H};var n=function(){return a(this).offset()?$this.offset().top:0},q=function(){return a(this).offset()?$this.offset().left:0};a.each("tapstart tapend tapmove tap tap2 tap3 tap4 singletap doubletap taphold swipe swipeup swiperight swipedown swipeleft swipeend scrollstart scrollend orientationchange".split(" "),function(f,c){a.fn[c]=function(a){return a?this.on(c,a):this.trigger(c)};a.attrFn[c]=!0});a.event.special.tapstart={setup:function(){var k=this,c=a(k);c.on(w,function g(a){c.data("callee",g);if(a.which&&1!==a.which)return!1;var e=a.originalEvent,e={position:{x:f?e.touches[0].screenX:a.screenX,y:f?e.touches[0].screenY:a.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target};v(k,"tapstart",a,e);return!0})},remove:function(){a(this).off(w,a(this).data.callee)}};a.event.special.tapmove={setup:function(){var k=this,c=a(k);c.on(A,function g(a){c.data("callee",g);var e=a.originalEvent,e={position:{x:f?e.touches[0].screenX:a.screenX,y:f?e.touches[0].screenY:a.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target};v(k,"tapmove",a,e);return!0})},remove:function(){a(this).off(A,a(this).data.callee)}};a.event.special.tapend={setup:function(){var k=this,c=a(k);c.on(x,function g(a){c.data("callee",g);var e=a.originalEvent,e={position:{x:f?e.changedTouches[0].screenX:a.screenX,y:f?e.changedTouches[0].screenY:a.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target};v(k,"tapend",a,e);return!0})},remove:function(){a(this).off(x,a(this).data.callee)}};a.event.special.taphold={setup:function(){var k=this,c=a(k),u,g=0,t=0,e=0,d=0,h;c.on(w,function z(a){if(a.which&&1!==a.which)return!1;c.data("tapheld",!1);u=a.target;var b=a.originalEvent,l=Date.now(),p={x:f?b.touches[0].screenX:a.screenX,y:f?b.touches[0].screenY:a.screenY},m={x:f?b.touches[0].pageX-b.touches[0].target.offsetLeft:a.offsetX,y:f?b.touches[0].pageY-b.touches[0].target.offsetTop:a.offsetY};g=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;t=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY;e=g;d=t;h=window.setTimeout(function(){var h=g-e,r=t-d;if(a.target==u&&(g==e&&t==d||-5<=h&&5>=h&&-5<=r&&5>=r)){c.data("tapheld",!0);var h=Date.now(),r={x:f?b.touches[0].screenX:a.screenX,y:f?b.touches[0].screenY:a.screenY},y={x:f?Math.round(b.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(b.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},h={startTime:l,endTime:h,startPosition:p,startOffset:m,endPosition:r,endOffset:y,duration:h-l,target:a.target};c.data("callee1",z);v(k,"taphold",a,h)}},750);return!0}).on(x,function p(){c.data("callee2",p);c.data("tapheld",!1);window.clearTimeout(h)}).on(A,function b(a){c.data("callee3",b);e=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;d=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY})},remove:function(){a(this).off(w,a(this).data.callee1).off(x,a(this).data.callee2).off(A,a(this).data.callee3)}};a.event.special.doubletap={setup:function(){var k=this,c=a(k),u,g,t=null,e,d=!1;c.on(w,function I(a){if(a.which&&1!==a.which)return!1;c.data("doubletapped",!1);c.data("callee1",I);e=a.originalEvent;t||(t={position:{x:f?e.touches[0].screenX:a.screenX,y:f?e.touches[0].screenY:a.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target});return!0}).on(x,function z(a){var b=Date.now(),l=c.data("lastTouch")||b+1,l=b-l;window.clearTimeout(g);c.data("callee2",z);500>l&&a.target==u&&100<l?(c.data("doubletapped",!0),window.clearTimeout(void 0),l={position:{x:f?a.originalEvent.changedTouches[0].screenX:a.screenX,y:f?a.originalEvent.changedTouches[0].screenY:a.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target},l={firstTap:t,secondTap:l,interval:l.time-t.time},d||(v(k,"doubletap",a,l),t=null),d=!0,window.setTimeout(function(){d=!1},500)):(c.data("lastTouch",b),g=window.setTimeout(function(){t=null;window.clearTimeout(g)},500,[a]));u=a.target;c.data("lastTouch",b)})},remove:function(){a(this).off(w,a(this).data.callee1).off(x,a(this).data.callee2)}};a.event.special.singletap={setup:function(){var k=this,c=a(k),u=null,g=null,d=0,e=0;c.on(w,function h(a){if(a.which&&1!==a.which)return!1;g=Date.now();u=a.target;c.data("callee1",h);d=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;e=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY;return!0}).on(x,function I(a){c.data("callee2",I);if(a.target==u){var p=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:a.pageX,b=a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageY:a.pageY;window.setTimeout(function(){if(!c.data("doubletapped")&&!c.data("tapheld")&&d==p&&e==b){var l=a.originalEvent,l={position:{x:f?l.changedTouches[0].screenX:a.screenX,y:f?l.changedTouches[0].screenY:a.screenY},offset:{x:f?Math.round(l.changedTouches[0].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(l.changedTouches[0].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target};750>l.time-g&&v(k,"singletap",a,l)}},500)}})},remove:function(){a(this).off(w,a(this).data.callee1).off(x,a(this).data.callee2)}};a.event.special.tap={setup:function(){var k=this,c=a(k),d=!1,g=null,t,e=0,y=0,h;c.on(w,function z(a){c.data("callee1",z);if(a.which&&1!==a.which)return!1;d=!0;e=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX;y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY;t=Date.now();g=a.target;h=a.originalEvent.targetTouches?a.originalEvent.targetTouches:[a];return!0}).on(x,function p(a){c.data("callee2",p);var b=a.originalEvent.targetTouches?a.originalEvent.changedTouches[0].pageX:a.pageX,r=a.originalEvent.targetTouches?a.originalEvent.changedTouches[0].pageY:a.pageY,m=e-b,u=y-r;if(g==a.target&&d&&750>Date.now()-t&&(e==b&&y==r||-5<=m&&5>=m&&-5<=u&&5>=u)){b=a.originalEvent;r=[];for(m=0;m<h.length;m++)u={position:{x:f?b.changedTouches[m].screenX:a.screenX,y:f?b.changedTouches[m].screenY:a.screenY},offset:{x:f?Math.round(b.changedTouches[m].pageX-q()):Math.round(a.pageX-q()),y:f?Math.round(b.changedTouches[m].pageY-n()):Math.round(a.pageY-n())},time:Date.now(),target:a.target},r.push(u);v(k,"tap",a,r)}})},remove:function(){a(this).off(w,a(this).data.callee1).off(x,a(this).data.callee2)}};a.event.special.swipe={setup:function(){var k,c,d,g;function t(b){h=a(b.currentTarget);h.data("callee1",t);d=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageX:b.pageX;g=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageY:b.pageY;k=d;c=g;v=!0;var e=b.originalEvent;p={position:{x:f?e.touches[0].screenX:b.screenX,y:f?e.touches[0].screenY:b.screenY},offset:{x:f?Math.round(e.changedTouches[0].pageX-q()):Math.round(b.pageX-q()),y:f?Math.round(e.changedTouches[0].pageY-n()):Math.round(b.pageY-n())},time:Date.now(),target:b.target}}function e(b){h=a(b.currentTarget);h.data("callee2",e);k=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageX:b.pageX;c=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageY:b.pageY;var l,r=h.parent().data("xthreshold")?h.parent().data("xthreshold"):h.data("xthreshold"),m=h.parent().data("ythreshold")?h.parent().data("ythreshold"):h.data("ythreshold"),r="undefined"!==typeof r&&!1!==r&&parseInt(r)?parseInt(r):50,m="undefined"!==typeof m&&!1!==m&&parseInt(m)?parseInt(m):50;g>c&&g-c>m&&(l="swipeup");d<k&&k-d>r&&(l="swiperight");g<c&&c-g>m&&(l="swipedown");d>k&&d-k>r&&(l="swipeleft");void 0!=l&&v&&(c=k=g=d=0,v=!1,m=b.originalEvent,b={position:{x:f?m.touches[0].screenX:b.screenX,y:f?m.touches[0].screenY:b.screenY},offset:{x:f?Math.round(m.changedTouches[0].pageX-q()):Math.round(b.pageX-q()),y:f?Math.round(m.changedTouches[0].pageY-n()):Math.round(b.pageY-n())},time:Date.now(),target:b.target},m=Math.abs(p.position.x-b.position.x),r=Math.abs(p.position.y-b.position.y),b={startEvnt:p,endEvnt:b,direction:l.replace("swipe",""),xAmount:m,yAmount:r,duration:b.time-p.time},z=!0,h.trigger("swipe",b).trigger(l,b))}function y(b){h=a(b.currentTarget);var c="";h.data("callee3",y);if(z){var e=h.data("xthreshold"),d=h.data("ythreshold"),e="undefined"!==typeof e&&!1!==e&&parseInt(e)?parseInt(e):50,d="undefined"!==typeof d&&!1!==d&&parseInt(d)?parseInt(d):50,k=b.originalEvent;b={position:{x:f?k.changedTouches[0].screenX:b.screenX,y:f?k.changedTouches[0].screenY:b.screenY},offset:{x:f?Math.round(k.changedTouches[0].pageX-q()):Math.round(b.pageX-q()),y:f?Math.round(k.changedTouches[0].pageY-n()):Math.round(b.pageY-n())},time:Date.now(),target:b.target};p.position.y>b.position.y&&p.position.y-b.position.y>d&&(c="swipeup");p.position.x<b.position.x&&b.position.x-p.position.x>e&&(c="swiperight");p.position.y<b.position.y&&b.position.y-p.position.y>d&&(c="swipedown");p.position.x>b.position.x&&p.position.x-b.position.x>e&&(c="swipeleft");e=Math.abs(p.position.x-b.position.x);d=Math.abs(p.position.y-b.position.y);c={startEvnt:p,endEvnt:b,direction:c.replace("swipe",""),xAmount:e,yAmount:d,duration:b.time-p.time};h.trigger("swipeend",c)}z=v=!1}var h=a(this),v=!1,z=!1;c=k=g=d=0;var p;h.on(w,t);h.on(A,e);h.on(x,y)},remove:function(){a(this).off(w,a(this).data.callee1).off(A,a(this).data.callee2).off(x,a(this).data.callee3)}};a.event.special.scrollstart={setup:function(){function d(a,d){g=d;v(c,g?"scrollstart":"scrollend",a)}var c=this,f=a(c),g,n;f.on(H,function y(a){f.data("callee",y);g||d(a,!0);clearTimeout(n);n=setTimeout(function(){d(a,!1)},50)})},remove:function(){a(this).off(H,a(this).data.callee)}};var C=a(window),D,G,B,J={0:!0,180:!0};E&&(d=window.innerWidth||C.width(),B=window.innerHeight||C.height(),d=d>B&&50<d-B,B=J[window.orientation],d&&B||!d&&!B)&&(J={"-90":!0,90:!0});a.event.special.orientationchange={setup:function(){if(E)return!1;G=D();C.on("throttledresize",F);return!0},teardown:function(){if(E)return!1;C.off("throttledresize",F);return!0},add:function(a){var c=a.handler;a.handler=function(a){a.orientation=D();return c.apply(this,arguments)}}};a.event.special.orientationchange.orientation=D=function(){var a=document.documentElement;return(E?J[window.orientation]:a&&1.1>a.clientWidth/a.clientHeight)?"portrait":"landscape"};a.event.special.throttledresize={setup:function(){a(this).on("resize",N)},teardown:function(){a(this).off("resize",N)}};var N=function(){K=Date.now();L=K-O;250<=L?(O=K,a(this).trigger("throttledresize")):(M&&window.clearTimeout(M),M=window.setTimeout(F,250-L))},O=0,M,K,L;a.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(d,c){a.event.special[d]={setup:function(){a(this).on(c,a.noop)}}})})(jQuery);